"use strict";window.ClashEditor.select=["DIRECT","REJECT"],function(w,e,t,C){function L(){$("#proxygroup-select-list").sortable("destroy");var e="",t=!0,r=!1,o=void 0;try{for(var l,n=C.ClashEditor.select[Symbol.iterator]();!(t=(l=n.next()).done);t=!0){var a=l.value;e+='<div class="col-md-6 col-lg-4 col-xl-3 sk-px-1">\n                    <input class="proxygroup-select-input sk-hide" name="proxygroup-select" id="proxygroup-select-'.concat(a,'" type="checkbox" value="').concat(a,'">\n                    <label class="proxygroup-select-label card sk-p-3 sk-font-14" for="proxygroup-select-').concat(a,'">').concat(a,"</label>\n                </div>")}}catch(e){r=!0,o=e}finally{try{t||null==n.return||n.return()}finally{if(r)throw o}}w.getElementById("proxygroup-select-list").innerHTML=e,$("#proxygroup-select-list").sortable({placeholderClass:"proxygroup-select-label card col-md-6 col-lg-4 col-xl-3"})}var r=w.getElementById("msg"),o=e.getItem("clashEditor:config:proxy"),l=e.getItem("clashEditor:config:proxygroup");if(o&&""!==o){var n=!0,a=!1,c=void 0;try{for(var i,u=jsyaml.load(o).Proxy[Symbol.iterator]();!(n=(i=u.next()).done);n=!0){var y=i.value;C.ClashEditor.select.push(y.name)}}catch(e){a=!0,c=e}finally{try{n||null==u.return||u.return()}finally{if(a)throw c}}L()}else Modal("这看起来不太正常","Clash Editor 无法读取您的 Proxy 配置！<br>3 秒后将会回到 Proxy 编辑页面！"),setTimeout(function(){C.location.pathname="/proxy"},3500);var S=t(w.getElementById("proxygroup-editor"),{lineNumbers:!0,mode:"yaml"});l&&""!==l?S.setValue(l):S.setValue("Proxy Group:\n");var p=!0,s=!1,d=void 0;try{for(var g,v=function(){var e=g.value;e.addEventListener("change",function(){e.checked&&"select"!==e.value?w.getElementById("proxygroup-httpcheck-container").style.display="block":w.getElementById("proxygroup-httpcheck-container").style.display="none"})},m=w.getElementsByName("proxygroup-category")[Symbol.iterator]();!(p=(g=m.next()).done);p=!0)v()}catch(e){s=!0,d=e}finally{try{p||null==m.return||m.return()}finally{if(s)throw d}}w.getElementById("ce-proxygroup-btn-select-opposite").addEventListener("click",function(){var e=w.getElementsByName("proxygroup-select"),t=!0,r=!1,o=void 0;try{for(var l,n=e[Symbol.iterator]();!(t=(l=n.next()).done);t=!0){var a=l.value;a.checked?a.checked=!1:a.checked=!0}}catch(e){r=!0,o=e}finally{try{t||null==n.return||n.return()}finally{if(r)throw o}}}),w.getElementById("ce-proxygroup-btn-select-all").addEventListener("click",function(){var e=w.getElementsByName("proxygroup-select"),t=!0,r=!1,o=void 0;try{for(var l,n=e[Symbol.iterator]();!(t=(l=n.next()).done);t=!0){l.value.checked=!0}}catch(e){r=!0,o=e}finally{try{t||null==n.return||n.return()}finally{if(r)throw o}}}),w.getElementById("ce-proxygroup-btn-submit").addEventListener("click",function(e){var t=[],r="",o=w.getElementById("proxygroup-policy-list"),l=new FormData(o),n=!0,a=!1,c=void 0;try{for(var i,u=l[Symbol.iterator]();!(n=(i=u.next()).done);n=!0){r=i.value[1]}}catch(e){a=!0,c=e}finally{try{n||null==u.return||u.return()}finally{if(a)throw c}}var y=w.getElementsByName("proxygroup-select"),p=!0,s=!1,d=void 0;try{for(var g,v=y[Symbol.iterator]();!(p=(g=v.next()).done);p=!0){var m=g.value;m.checked&&t.push("    - ".concat(m.value))}}catch(e){s=!0,d=e}finally{try{p||null==v.return||v.return()}finally{if(s)throw d}}var x="",h=!0,f=!1,E=void 0;try{for(var b,k=w.getElementsByName("proxygroup-category")[Symbol.iterator]();!(h=(b=k.next()).done);h=!0){var B=b.value;B.checked&&"select"!==B.value&&(x="url: ".concat(getValue("proxygroup-httpcheck-url"),"\n  interval: ").concat(getValue("proxygroup-httpcheck-interval")))}}catch(e){f=!0,E=e}finally{try{h||null==k.return||k.return()}finally{if(f)throw E}}var I="".concat(S.getValue(),"\n- name: ").concat(getValue("proxygroup-name"),"\n  type: ").concat(r,"\n  proxies:\n").concat(t.join("\n"),"\n  ").concat(x);C.ClashEditor.select.push(getValue("proxygroup-name")),S.setValue(I),o.reset(),L(),setLS("clashEditor:config:proxygroup",S.getValue()),$("#ce-modal-proxygroup").modal("hide")}),w.getElementById("ce-proxygroup-btn-validate").addEventListener("click",function(){try{jsyaml.load(S.getValue()),setLS("clashEditor:config:proxygroup",S.getValue()),r.innerHTML='<span class="text-success">Proxy Group 检查通过！</span>',w.getElementById("ce-proxygroup-btn-continue").classList.remove("disabled"),w.getElementById("ce-proxygroup-btn-continue").removeAttribute("disabled"),w.getElementById("ce-proxygroup-btn-continue").setAttribute("href","/rule")}catch(e){Modal("这看起来不太正常","<p>Clash Editor 似乎不能解析您提交的 YAML 内容</p>\n                <p>报错信息如下所示：</p>\n                <p><code>".concat(e,"</code></p>\n                <p>如果您认为这不是您的问题，请在 Clash Editor 的 GitHub 上提交一条 issue，并在 issue 中附上报错信息以供调试</p>"))}})}(document,localStorage,CodeMirror,window);